# Пример использования Dockerfile
## Запуск приложения в контейнере
Для запуска приложения в контейнере:
```bash
# Находясь в корневой папке репозитория
docker build --tag matrix-std . -f deployment/Dockerfile
docker run matrix-std /App/entrypoint.sh
```

## Dockerfile
`Dockerfile` может быть найден по пути `/deployment/Dockerfile` и соответствует [лучшим практикам по версии докера](https://docs.docker.com/build/building/best-practices/):
 - все пути `WORKDIR` абсолютны от корня репозитория;
 - использован multi-stage build: в этапе `build` установлены sdk, восстановлены зависимости, но в итоговый контейнер идет только собранное приложени; 
 - в контейнере запускается только приложение, остальное поднимается в отдельных контейнерах через `docker-compose`;
 - использовано минимальное количество слоев;
 - не использованы инструкции `CMD` и `ENTRYPOINT`, предполагается что команда для запуска приложения будет передана во время запуска контейнера, что расширяет возможности использования контейнера;
 - в качестве базы использованы образы на основе `alpine`, что делает контейнеры легкими и безопасными;
 - для образов указаны `SHA256`, что предотвращает проблемы сборки и безопасности, так как исключает вероятность замены контейнера поставщиком без смены тэга [medium](https://rockbag.medium.com/why-you-should-pin-your-docker-images-with-sha-instead-of-tags-fd132443b8a6);
 - проходит hadolint (предупреждение ```Dockerfile:8 DL3059 info: Multiple consecutive `RUN` instructions. Consider consolidation.``` является нарушением лучших практик разделения слоя восстановления пакетов и кода)